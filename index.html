<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Anus Words v. Subs</title>
<style>
  /* Windows 97 general look */
  body {
    font-family: "MS Sans Serif", Tahoma, sans-serif;
    background: #008080;
    color: black;
    margin: 20px;
    text-align: center;
  }

  /* Subscriber tracker top-right */
  #subscriberBox {
    position: fixed;
    top: 10px;
    right: 10px;
    background: #8B4513; /* brown */
    color: white;
    border: 2px inset #fff;
    padding: 10px;
    width: 220px;
    font-weight: bold;
    box-shadow: inset 2px 2px #fff, inset -2px -2px #808080;
  }

  /* Window container expanded */
  .window {
    width: 500px; /* expanded width */
    max-width: 90%;
    margin: 60px auto 20px;
    border: 2px solid #000;
    box-shadow: 4px 4px #808080;
    background: #c0c0c0;
  }

  /* Title bar */
  .title-bar {
    background: #000080;
    color: white;
    padding: 3px 5px;
    font-weight: bold;
    font-size: 14px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .title-bar button {
    width: 20px;
    height: 18px;
    font-weight: bold;
    font-family: "MS Sans Serif";
    border: 2px outset #fff;
    background: #c0c0c0;
    cursor: pointer;
  }

  .content {
    padding: 10px;
    background: #c0c0c0;
  }

  h1 {
    font-weight: normal;
    margin: 5px;
  }

  /* Word input box */
  input#wordInput {
    padding: 4px;
    font-size: 14px;
    width: 400px; /* larger input */
    border: 2px inset #fff;
    margin-right: 5px;
  }

  button.add-clear {
    padding: 4px 8px;
    font-size: 14px;
    border: 2px outset #fff;
    cursor: pointer;
    margin: 2px;
    background: #c0c0c0;
  }

  #counter {
    margin: 10px 0;
    font-weight: bold;
  }

  #message {
    color: red;
    font-weight: bold;
    margin-top: 5px;
  }

  #wordList {
    max-height: 200px;
    overflow-y: auto;
    background: #fff;
    border: 2px inset #fff;
    margin-top: 10px;
    padding: 5px;
    list-style: none;
    font-family: "MS Sans Serif";
  }

  li {
    border-bottom: 1px solid #808080;
    padding: 2px;
  }

  /* Progress bar aligned with main window */
  .progress-container {
    background: #fff;
    border: 2px inset #fff;
    width: 500px; /* match main window width */
    max-width: 90%;
    height: 20px;
    margin: 10px auto 40px;
  }

  .progress-bar {
    background: #000080;
    height: 100%;
    width: 0%;
    text-align: center;
    color: black; /* progress text now black */
    font-size: 12px;
    line-height: 20px;
    white-space: nowrap;
    overflow: visible;
  }

  /* Scrollbar style for Windows 97 feel */
  #wordList::-webkit-scrollbar {
    width: 16px;
    background: #c0c0c0;
  }
  #wordList::-webkit-scrollbar-thumb {
    background: #808080;
    border: 2px solid #c0c0c0;
  }
  #wordList::-webkit-scrollbar-track {
    background: #c0c0c0;
  }
</style>
</head>
<body>

<div id="subscriberBox">
  Subscriber Tracker: <span id="subscriberCount">Loading...</span>
</div>

<div class="window">
  <div class="title-bar">
    <span>Anus Words v. Subs</span>
    <button onclick="alert('Close button pressed!')">X</button>
  </div>

  <div class="content">
    <input id="wordInput" type="text" placeholder="Enter a word..." />
    <button class="add-clear" onclick="clearWords()">Clear All Words</button>

    <div id="counter">Words added: 0 / 0</div>
    <div id="message"></div>
    <ul id="wordList"></ul>
  </div>
</div>

<div class="progress-container">
  <div id="progressBar" class="progress-bar">0.00%</div>
</div>

<script>
let words = new Set(JSON.parse(localStorage.getItem("words") || "[]"));
const input = document.getElementById("wordInput");
const list = document.getElementById("wordList");
const counter = document.getElementById("counter");
const message = document.getElementById("message");
const subscriberCountDiv = document.getElementById("subscriberCount");
const progressBar = document.getElementById("progressBar");

let subscriberCount = 0;

function updateDisplay() {
  counter.textContent = `Words added: ${words.size.toLocaleString()} / ${subscriberCount.toLocaleString()}`;
  list.innerHTML = "";
  [...words].reverse().forEach(word => {
    const li = document.createElement("li");
    li.textContent = word;
    list.appendChild(li);
  });
  let progress = subscriberCount > 0 ? (words.size / subscriberCount) * 100 : 0;
  if (progress > 100) progress = 100;
  progressBar.style.width = progress + "%";
  progressBar.textContent = progress.toFixed(2) + "%";
}

function addWord() {
  const newWord = input.value.trim().toLowerCase();
  message.textContent = "";
  if (!newWord) return;
  if (words.has(newWord)) {
    message.textContent = "Duplicate! That word has already been entered.";
  } else {
    words.add(newWord);
    localStorage.setItem("words", JSON.stringify([...words]));
    updateDisplay();
  }
  input.value = "";
  input.focus();
}

// Allow Enter key to add word
input.addEventListener("keypress", function(e) {
  if (e.key === "Enter") {
    addWord();
  }
});

function clearWords() {
  const password = prompt("Enter password to clear all words:");
  if (password === "anuspass") {
    words.clear();
    localStorage.removeItem("words");
    updateDisplay();
  } else {
    alert("Incorrect password.");
  }
}

async function fetchSubscribers() {
  const apiKey = "AIzaSyBtcKxmge24wcaEQwJv0uBHKmQBLgIg0gw";
  const channelId = "UCL6OtB3m-gQ2mgRg61-aDXw";

  try {
    const response = await fetch(
      `https://www.googleapis.com/youtube/v3/channels?part=statistics&id=${channelId}&key=${apiKey}`
    );
    const data = await response.json();
    if (data.items && data.items.length > 0) {
      subscriberCount = parseInt(data.items[0].statistics.subscriberCount);
      subscriberCountDiv.textContent = subscriberCount.toLocaleString();
      updateDisplay();
    } else {
      subscriberCountDiv.textContent = "Subscriber data not found.";
    }
  } catch (error) {
    subscriberCountDiv.textContent = "Error loading subscriber count.";
    console.error(error);
  }
}

// Auto-refresh subscriber count every 30 seconds
setInterval(fetchSubscribers, 30000);

// Initialize
updateDisplay();
fetchSubscribers();
</script>

</body>
</html>
